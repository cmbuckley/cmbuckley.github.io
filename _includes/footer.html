{%- assign main_repo = site.github.public_repositories | where_exp:'r','r.name == site.github.repository_name' | first -%}
{%- capture edit_link -%}{% github_edit_link "source" %}{%- endcapture -%}
{%- if page.paginated and paginator.page > 1 -%}
  {%- assign first_page = site.pages | where_exp: 'p','p.paginated == true' | sort: 'path' | first -%}
  {%- assign edit_link = edit_link | replace: page.path, first_page.path -%}
{%- endif -%}
<footer>
    <div class="container">
        <p class="copy">
            &copy; <a href="{{ main_repo.html_url | replace: 'http:','https:' }}#licence">{{ site.time | date: '%Y' }} Chris Buckley</a>.
            <span class="powered">Powered by <a href="https://jekyllrb.com">Jekyll</a> / <a href="https://pages.github.com/">GitHub Pages</a>
            <span class="source-link">({{ edit_link | replace_first: '/edit/','/blob/' }})</span></span>
        </p>

        <div class="footer-links">
            <ul class="list--flex">
                <li><a rel="me" href="https://github.com/{% include social.html id='github' %}" title="{% include social.html id='github' %} on GitHub">
                  {% include icons/use.html icon="github" %}<span class="sr-only">GitHub</span>
                </a></li>
                <li><a rel="me" href="https://www.linkedin.com/in/{% include social.html id='linkedin' %}" title="{% include social.html id='linkedin' %} on LinkedIn">
                  {% include icons/use.html icon="linkedin-square" %}<span class="sr-only">LinkedIn</span>
                </a></li>
                <li><a rel="me" href="https://hackerone.com/{% include social.html id='hackerone' %}" title="{% include social.html id='hackerone' %} on HackerOne">
                  {% include icons/use.html icon="hackerone" %}<span class="sr-only">HackerOne</span>
                </a></li>
                <li><a rel="me" href="mailto:{% include social.html id='email' %}" title="Email">
                  {% include icons/use.html icon="envelope" %}<span class="sr-only">Email</span>
                </a></li>
                <li><a rel="me" href="https://twitter.com/{% include social.html id='x' %}" title="@{% include social.html id='x' %} on X">
                  {% include icons/use.html icon="x" %}<span class="sr-only">X</span>
                </a></li>
                <li><a rel="me" href="https://www.facebook.com/{% include social.html id='facebook' %}" title="{% include social.html id='facebook' %} on Facebook" data-fb-profile="{% include social.html id='fbid' %}">
                  {% include icons/use.html icon="facebook-official" %}<span class="sr-only">Facebook</span>
                </a></li>
                <li><a rel="me" href="https://instagr.am/{% include social.html id='instagram' %}" title="@{% include social.html id='instagram' %} on Instagram">
                  {% include icons/use.html icon="instagram" %}<span class="sr-only">Instagram</span>
                </a></li>
                {%- capture mastodon %}{% include social.html id='mastodon' %}{% endcapture %}
                <li><a rel="me" href="https://{{ mastodon | split: '@' | last }}/@{{ mastodon | split: '@' | first }}" title="@{{ mastodon }} on Mastodon">
                  {% include icons/use.html icon="mastodon" %}<span class="sr-only">Mastodon</span>
                </a></li>
                <li><a rel="me" href="https://bsky.app/profile/{% include social.html id='bsky' %}" title="@{% include social.html id='bsky' %} on Bluesky">
                  {% include icons/use.html icon="bluesky" %}<span class="sr-only">Bluesky</span>
                </a></li>
                <li><a href="{% include social.html id='amazon' %}" title="Amazon Wishlist">
                  {% include icons/use.html icon="amazon" %}<span class="sr-only">Amazon Wishlist</span>
                </a></li>
                <li><a href="{{ site.url }}/site-map/" title="Site Map">
                  {% include icons/use.html icon="sitemap" %}<span class="sr-only">Site Map</span>
                </a></li>
            </ul>
        </div>
    </div>
</footer>
